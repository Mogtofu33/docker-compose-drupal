<VirtualHost *:80>
  ServerName localhost

  DocumentRoot /var/www/localhost/drupal/web
  DirectoryIndex /index.php index.php

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/var/www/localhost/drupal/web/$1
  </IfModule>
</VirtualHost>

<VirtualHost *:443>

  DocumentRoot "/var/www/localhost/drupal/web"
  ServerName localhost:443

  <IfModule proxy_module>
      ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/var/www/localhost/drupal/web/$1
  </IfModule>

  <IfModule ssl_module>
    SSLEngine on
    SSLCertificateFile /etc/ssl/apache2/server.crt
    SSLCertificateKeyFile /etc/ssl/apache2/server.key
    SSLVerifyClient none

    <FilesMatch "\.(cgi|shtml|phtml|php)$">
        SSLOptions +StdEnvVars
    </FilesMatch>
    <Directory "/var/www/localhost/cgi-bin">
        SSLOptions +StdEnvVars
    </Directory>
  </IfModule>

</VirtualHost>

# Dashboard.
<VirtualHost *:8181>
  ServerName dashboard.local
  DocumentRoot /var/www/dashboard
  DirectoryIndex /index.php index.php

  <IfModule proxy_module>
      ProxyPassMatch ^/(fpm-ping|fpm-status) fcgi://127.0.0.1:9000
      ProxyPassMatch ^/(.*\.php)$ fcgi://127.0.0.1:9000/var/www/dashboard/$1
  </IfModule>
</VirtualHost>
